!function(){var e="undefined"!=typeof exports?exports:this,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var r,o,a=0,i=t,s="";e.charAt(0|a)||(i="=",a%1);s+=i.charAt(63&r>>8-a%1*8)){if((o=e.charCodeAt(a+=3/4))>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|o}return s}),e.atob||(e.atob=function(e){if((e=e.replace(/=+$/,"")).length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,a=0,i=0,s="";o=e.charAt(i++);~o&&(r=a%4?64*r+o:o,a++%4)?s+=String.fromCharCode(255&r>>(-2*a&6)):0)o=t.indexOf(o);return s})}();
/**
 * @license -------------------------------------------------------------------
 *   module: Base64Binary
 *      src: http://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/
 *  license: Simplified BSD License
 * -------------------------------------------------------------------
 * Copyright 2011, Daniel Guerrero. All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     - Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     - Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL DANIEL GUERRERO BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(e){var t=Math.ceil(3*e.length/4),n=new ArrayBuffer(t);return this.decode(e,n),n},decode:function(e,t){var n,r,o,a,i,s,u,c=this._keyStr.indexOf(e.charAt(e.length-1)),l=this._keyStr.indexOf(e.charAt(e.length-1)),d=Math.ceil(3*e.length/4);64==c&&d--,64==l&&d--;var f=0,p=0;for(n=t?new Uint8Array(t):new Uint8Array(d),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),f=0;f<d;f+=3)r=this._keyStr.indexOf(e.charAt(p++))<<2|(i=this._keyStr.indexOf(e.charAt(p++)))>>4,o=(15&i)<<4|(s=this._keyStr.indexOf(e.charAt(p++)))>>2,a=(3&s)<<6|(u=this._keyStr.indexOf(e.charAt(p++))),n[f]=r,64!=s&&(n[f+1]=o),64!=u&&(n[f+2]=a);return n}};function Stream(e){var t=0;function n(n){var r=e.charCodeAt(t);return n&&r>127&&(r-=256),t+=1,r}return{eof:function(){return t>=e.length},read:function(n){var r=e.substr(t,n);return t+=n,r},readInt32:function(){var n=(e.charCodeAt(t)<<24)+(e.charCodeAt(t+1)<<16)+(e.charCodeAt(t+2)<<8)+e.charCodeAt(t+3);return t+=4,n},readInt16:function(){var n=(e.charCodeAt(t)<<8)+e.charCodeAt(t+1);return t+=2,n},readInt8:n,readVarInt:function(){for(var e=0;;){var t=n();if(!(128&t))return e+t;e+=127&t,e<<=7}}}}function MidiFile(e){function t(e){var t=e.read(4),n=e.readInt32();return{id:t,length:n,data:e.read(n)}}var n;function r(e){var t={};t.deltaTime=e.readVarInt();var r,o=e.readInt8();if(240==(240&o)){if(255==o){t.type="meta";var a=e.readInt8(),i=e.readVarInt();switch(a){case 0:if(t.subtype="sequenceNumber",2!=i)throw"Expected length for sequenceNumber event is 2, got "+i;return t.number=e.readInt16(),t;case 1:return t.subtype="text",t.text=e.read(i),t;case 2:return t.subtype="copyrightNotice",t.text=e.read(i),t;case 3:return t.subtype="trackName",t.text=e.read(i),t;case 4:return t.subtype="instrumentName",t.text=e.read(i),t;case 5:return t.subtype="lyrics",t.text=e.read(i),t;case 6:return t.subtype="marker",t.text=e.read(i),t;case 7:return t.subtype="cuePoint",t.text=e.read(i),t;case 32:if(t.subtype="midiChannelPrefix",1!=i)throw"Expected length for midiChannelPrefix event is 1, got "+i;return t.channel=e.readInt8(),t;case 47:if(t.subtype="endOfTrack",0!=i)throw"Expected length for endOfTrack event is 0, got "+i;return t;case 81:if(t.subtype="setTempo",3!=i)throw"Expected length for setTempo event is 3, got "+i;return t.microsecondsPerBeat=(e.readInt8()<<16)+(e.readInt8()<<8)+e.readInt8(),t;case 84:if(t.subtype="smpteOffset",5!=i)throw"Expected length for smpteOffset event is 5, got "+i;var s=e.readInt8();return t.frameRate={0:24,32:25,64:29,96:30}[96&s],t.hour=31&s,t.min=e.readInt8(),t.sec=e.readInt8(),t.frame=e.readInt8(),t.subframe=e.readInt8(),t;case 88:if(t.subtype="timeSignature",4!=i)throw"Expected length for timeSignature event is 4, got "+i;return t.numerator=e.readInt8(),t.denominator=Math.pow(2,e.readInt8()),t.metronome=e.readInt8(),t.thirtyseconds=e.readInt8(),t;case 89:if(t.subtype="keySignature",2!=i)throw"Expected length for keySignature event is 2, got "+i;return t.key=e.readInt8(!0),t.scale=e.readInt8(),t;case 127:return t.subtype="sequencerSpecific",t.data=e.read(i),t;default:return t.subtype="unknown",t.data=e.read(i),t}return t.data=e.read(i),t}if(240==o){t.type="sysEx";i=e.readVarInt();return t.data=e.read(i),t}if(247==o){t.type="dividedSysEx";i=e.readVarInt();return t.data=e.read(i),t}throw"Unrecognised MIDI event type byte: "+o}0==(128&o)?(r=o,o=n):(r=e.readInt8(),n=o);var u=o>>4;switch(t.channel=15&o,t.type="channel",u){case 8:return t.subtype="noteOff",t.noteNumber=r,t.velocity=e.readInt8(),t;case 9:return t.noteNumber=r,t.velocity=e.readInt8(),0==t.velocity?t.subtype="noteOff":t.subtype="noteOn",t;case 10:return t.subtype="noteAftertouch",t.noteNumber=r,t.amount=e.readInt8(),t;case 11:return t.subtype="controller",t.controllerType=r,t.value=e.readInt8(),t;case 12:return t.subtype="programChange",t.programNumber=r,t;case 13:return t.subtype="channelAftertouch",t.amount=r,t;case 14:return t.subtype="pitchBend",t.value=r+(e.readInt8()<<7),t;default:throw"Unrecognised MIDI event type: "+u}}stream=Stream(e);var o=t(stream);if("MThd"!=o.id||6!=o.length)throw"Bad .mid file - header not found";var a=Stream(o.data),i=a.readInt16(),s=a.readInt16(),u=a.readInt16();if(32768&u)throw"Expressing time division in SMTPE frames is not supported yet";ticksPerBeat=u;for(var c={formatType:i,trackCount:s,ticksPerBeat:ticksPerBeat},l=[],d=0;d<c.trackCount;d++){l[d]=[];var f=t(stream);if("MTrk"!=f.id)throw"Unexpected chunk - expected MTrk, got "+f.id;for(var p=Stream(f.data);!p.eof();){var h=r(p);l[d].push(h)}}return{header:c,tracks:l}}
/**
 * @license -------------------------------------------------------------------
 *   module: WebAudioShim - Fix naming issues for WebAudioAPI supports
 *      src: https://github.com/Dinahmoe/webaudioshim
 *   author: Dinahmoe AB
 * -------------------------------------------------------------------
 * Copyright (c) 2012 DinahMoe AB
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
window.AudioContext=window.AudioContext||window.webkitAudioContext||null,window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext||null,function(e){var t,n,r,o=function(e){return"[object Function]"===Object.prototype.toString.call(e)||"[object AudioContextConstructor]"===Object.prototype.toString.call(e)};o(e)&&(n=new e).destination&&n.sampleRate&&(t=e.prototype,r=Object.getPrototypeOf(n.createBufferSource()),o(r.start)||o(r.noteOn)&&(r.start=function(e,t,n){switch(arguments.length){case 0:throw new Error("Not enough arguments.");case 1:this.noteOn(e);break;case 2:if(!this.buffer)throw new Error("Missing AudioBuffer");this.noteGrainOn(e,t,this.buffer.duration-t);break;case 3:this.noteGrainOn(e,t,n)}}),o(r.noteOn)||(r.noteOn=r.start),o(r.noteGrainOn)||(r.noteGrainOn=r.start),o(r.stop)||(r.stop=r.noteOff),o(r.noteOff)||(r.noteOff=r.stop),[["createGainNode","createGain"],["createDelayNode","createDelay"],["createJavaScriptNode","createScriptProcessor"]].forEach(function(e){for(var t,n;e.length;)t=e.pop(),o(this[t])?this[e.pop()]=this[t]:(n=e.pop(),this[t]=this[n])},t))}(window.AudioContext),function(e){"use strict";var t,n,r,o,a,i;function s(){}function u(){this.inputInUse=!1,this.outputInUse=!1;var e=document.createElement("object");e.id="_Jazz"+Math.random()+"ie",e.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",this.activeX=e;var t=document.createElement("object");t.id="_Jazz"+Math.random(),t.type="audio/x-jazz",e.appendChild(t),this.objRef=t;var n=document.createElement("p");n.appendChild(document.createTextNode("This page requires the "));var r,o=document.createElement("a");(o.appendChild(document.createTextNode("Jazz plugin")),o.href="http://jazz-soft.net/",n.appendChild(o),n.appendChild(document.createTextNode(".")),t.appendChild(n),r=document.getElementById("MIDIPlugin"))||((r=document.createElement("div")).id="MIDIPlugin",r.style.position="absolute",r.style.visibility="hidden",r.style.left="-9999px",r.style.top="-9999px",document.body.appendChild(r));r.appendChild(e),this.objRef.isJazz?this._Jazz=this.objRef:this.activeX.isJazz?this._Jazz=this.activeX:this._Jazz=null,this._Jazz&&(this._Jazz._jazzTimeZero=this._Jazz.Time(),this._Jazz._perfTimeZero=window.performance.now())}function c(){this._promise&&this._promise.fail({code:1})}function l(){this.jazz.MidiOutLong(this.data)}s.prototype.then=function(e,t){this.accept=e,this.reject=t},s.prototype.succeed=function(e){this.accept&&this.accept(e)},s.prototype.fail=function(e){this.reject&&this.reject(e)},t=function(){return(new n)._promise},n=function(){this._jazzInstances=new Array,this._jazzInstances.push(new u),this._promise=new s,this._jazzInstances[0]._Jazz?(this._Jazz=this._jazzInstances[0]._Jazz,window.setTimeout(r.bind(this),3)):window.setTimeout(c.bind(this),3)},r=function(){this._promise&&this._promise.succeed(this)},n.prototype.inputs=function(){if(!this._Jazz)return null;for(var e=this._Jazz.MidiInList(),t=new Array(e.length),n=0;n<e.length;n++)t[n]=new o(this,e[n],n);return t},n.prototype.outputs=function(){if(!this._Jazz)return null;for(var e=this._Jazz.MidiOutList(),t=new Array(e.length),n=0;n<e.length;n++)t[n]=new a(this,e[n],n);return t},(o=function(e,t,n){this._listeners=[],this._midiAccess=e,this._index=n,this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this.id=n+"."+t,this.manufacturer="",this.name=t,this.type="input",this.version="",this.onmidimessage=null;for(var r=null,o=0;o<e._jazzInstances.length&&!r;o++)e._jazzInstances[o].inputInUse||(r=e._jazzInstances[o]);r||(r=new u,e._jazzInstances.push(r)),r.inputInUse=!0,this._jazzInstance=r._Jazz,this._input=this._jazzInstance.MidiInOpen(this._index,i.bind(this))}).prototype.addEventListener=function(e,t,n){if("midimessage"===e){for(var r=0;r<this._listeners.length;r++)if(this._listeners[r]==t)return;this._listeners.push(t)}},o.prototype.removeEventListener=function(e,t,n){if("midimessage"===e)for(var r=0;r<this._listeners.length;r++)if(this._listeners[r]==t)return void this._listeners.splice(r,1)},o.prototype.preventDefault=function(){this._pvtDef=!0},o.prototype.dispatchEvent=function(e){this._pvtDef=!1;for(var t=0;t<this._listeners.length;t++)this._listeners[t].handleEvent?this._listeners[t].handleEvent.bind(this)(e):this._listeners[t].bind(this)(e);return this.onmidimessage&&this.onmidimessage(e),this._pvtDef},o.prototype.appendToSysexBuffer=function(e){var t=this._sysexBuffer.length,n=new Uint8Array(t+e.length);n.set(this._sysexBuffer),n.set(e,t),this._sysexBuffer=n},o.prototype.bufferLongSysex=function(e,t){for(var n=t;n<e.length;){if(247==e[n])return n++,this.appendToSysexBuffer(e.slice(t,n)),n;n++}return this.appendToSysexBuffer(e.slice(t,n)),this._inLongSysexMessage=!0,n},i=function(e,t){var n,r=0,o=!1;for(n=0;n<t.length;n+=r){if(this._inLongSysexMessage){if(247!=t[(n=this.bufferLongSysex(t,n))-1])return;o=!0}else switch(o=!1,240&t[n]){case 128:case 144:case 160:case 176:case 224:r=3;break;case 192:case 208:r=2;break;case 240:switch(t[n]){case 240:if(247!=t[(n=this.bufferLongSysex(t,n))-1])return;o=!0;break;case 241:case 243:r=2;break;case 242:r=3;break;default:r=1}}var a=document.createEvent("Event");a.initEvent("midimessage",!1,!1),a.receivedTime=parseFloat(e.toString())+this._jazzInstance._perfTimeZero,o||this._inLongSysexMessage?(a.data=new Uint8Array(this._sysexBuffer),this._sysexBuffer=new Uint8Array(0),this._inLongSysexMessage=!1):a.data=new Uint8Array(t.slice(n,r+n)),this.dispatchEvent(a)}},(a=function(e,t,n){this._listeners=[],this._midiAccess=e,this._index=n,this.id=n+"."+t,this.manufacturer="",this.name=t,this.type="output",this.version="";for(var r=null,o=0;o<e._jazzInstances.length&&!r;o++)e._jazzInstances[o].outputInUse||(r=e._jazzInstances[o]);r||(r=new u,e._jazzInstances.push(r)),r.outputInUse=!0,this._jazzInstance=r._Jazz,this._jazzInstance.MidiOutOpen(this.name)}).prototype.send=function(e,t){var n=0;if(0===e.length)return!1;if(t&&(n=Math.floor(t-window.performance.now())),t&&n>1){var r=new Object;r.jazz=this._jazzInstance,r.data=e,window.setTimeout(l.bind(r),n)}else this._jazzInstance.MidiOutLong(e);return!0},window.navigator.requestMIDIAccess||(window.navigator.requestMIDIAccess=t)}(window),function(e){var t,n={};"performance"in e&&"now"in e.performance||("performance"in e||Object.defineProperty(e,"performance",{get:function(){return n}}),t=function(){for(var t,n=["moz","webkit","o","ms"],r=n.length,o={value:(t=Date.now(),function(){return Date.now()-t})};r>=0;r--)if(n[r]+"Now"in e.performance)return o.value=function(t){return function(){e.performance[t]()}}(n[r]+"Now"),o;return"timing"in e.performance&&"connectStart"in e.performance.timing&&(o.value=(e.performance.timing.connectStart,function(){Date.now()})),o}(),Object.defineProperty(e.performance,"now",t))}(window);var clone=function(e){if("object"!=typeof e)return e;if(null==e)return e;var t="number"==typeof e.length?[]:{};for(var n in e)t[n]=clone(e[n]);return t};function Replayer(e,t,n,r){for(var o=[],a=r||120,i=!!r,s=e.header.ticksPerBeat,u=0;u<e.tracks.length;u++)o[u]={nextEventIndex:0,ticksToNextEvent:e.tracks[u].length?e.tracks[u][0].deltaTime:null};var c;function l(){for(var t=null,n=null,r=null,a=0;a<o.length;a++)null!=o[a].ticksToNextEvent&&(null==t||o[a].ticksToNextEvent<t)&&(t=o[a].ticksToNextEvent,n=a,r=o[a].nextEventIndex);if(null!=n){var i=e.tracks[n][r];e.tracks[n][r+1]?o[n].ticksToNextEvent+=e.tracks[n][r+1].deltaTime:o[n].ticksToNextEvent=null,o[n].nextEventIndex+=1;for(a=0;a<o.length;a++)null!=o[a].ticksToNextEvent&&(o[a].ticksToNextEvent-=t);return{ticksToEvent:t,event:i,track:n}}return null}var d=[];return function(){function e(){i||"meta"!=c.event.type||"setTempo"!=c.event.subtype||(a=6e7/c.event.microsecondsPerBeat);var e=0;c.ticksToEvent>0&&(e=c.ticksToEvent/s/(a/60));var n=1e3*e*t||0;d.push([c,n]),c=l()}if(c=l())for(;c;)e()}(),{getData:function(){return clone(d)}}}if(void 0===MIDI&&(MIDI={}),function(e){"use strict";var t={},n=0,r=function(e){n++;var r=document.body,o=new Audio,a=e.split(";")[0];o.id="audio",o.setAttribute("preload","auto"),o.setAttribute("audiobuffer",!0),o.addEventListener("error",function(){r.removeChild(o),t[a]=!1,n--},!1),o.addEventListener("canplaythrough",function(){r.removeChild(o),t[a]=!0,n--},!1),o.src="data:"+e,r.appendChild(o)};MIDI.audioDetect=function(e){if(navigator.requestMIDIAccess)if(Function.prototype.toString.call(navigator.requestMIDIAccess).indexOf("[native code]"))t.webmidi=!0;else for(var o=0;navigator.plugins.length>o;o++){navigator.plugins[o].name.indexOf("Jazz-Plugin")>=0&&(t.webmidi=!0)}if("undefined"==typeof Audio)return e({});t.audiotag=!0,(window.AudioContext||window.webkitAudioContext)&&(t.webaudio=!0);var a=new Audio;if(void 0===a.canPlayType)return e(t);var i=a.canPlayType('audio/ogg; codecs="vorbis"');i="probably"===i||"maybe"===i;var s=a.canPlayType("audio/mpeg");if(s="probably"===s||"maybe"===s,i||s){i&&r("audio/ogg;base64,T2dnUwACAAAAAAAAAADqnjMlAAAAAOyyzPIBHgF2b3JiaXMAAAAAAUAfAABAHwAAQB8AAEAfAACZAU9nZ1MAAAAAAAAAAAAA6p4zJQEAAAANJGeqCj3//////////5ADdm9yYmlzLQAAAFhpcGguT3JnIGxpYlZvcmJpcyBJIDIwMTAxMTAxIChTY2hhdWZlbnVnZ2V0KQAAAAABBXZvcmJpcw9CQ1YBAAABAAxSFCElGVNKYwiVUlIpBR1jUFtHHWPUOUYhZBBTiEkZpXtPKpVYSsgRUlgpRR1TTFNJlVKWKUUdYxRTSCFT1jFloXMUS4ZJCSVsTa50FkvomWOWMUYdY85aSp1j1jFFHWNSUkmhcxg6ZiVkFDpGxehifDA6laJCKL7H3lLpLYWKW4q91xpT6y2EGEtpwQhhc+211dxKasUYY4wxxsXiUyiC0JBVAAABAABABAFCQ1YBAAoAAMJQDEVRgNCQVQBABgCAABRFcRTHcRxHkiTLAkJDVgEAQAAAAgAAKI7hKJIjSZJkWZZlWZameZaouaov+64u667t6roOhIasBACAAAAYRqF1TCqDEEPKQ4QUY9AzoxBDDEzGHGNONKQMMogzxZAyiFssLqgQBKEhKwKAKAAAwBjEGGIMOeekZFIi55iUTkoDnaPUUcoolRRLjBmlEluJMYLOUeooZZRCjKXFjFKJscRUAABAgAMAQICFUGjIigAgCgCAMAYphZRCjCnmFHOIMeUcgwwxxiBkzinoGJNOSuWck85JiRhjzjEHlXNOSuekctBJyaQTAAAQ4AAAEGAhFBqyIgCIEwAwSJKmWZomipamiaJniqrqiaKqWp5nmp5pqqpnmqpqqqrrmqrqypbnmaZnmqrqmaaqiqbquqaquq6nqrZsuqoum65q267s+rZru77uqapsm6or66bqyrrqyrbuurbtS56nqqKquq5nqq6ruq5uq65r25pqyq6purJtuq4tu7Js664s67pmqq5suqotm64s667s2rYqy7ovuq5uq7Ks+6os+75s67ru2rrwi65r66os674qy74x27bwy7ouHJMnqqqnqq7rmarrqq5r26rr2rqmmq5suq4tm6or26os67Yry7aumaosm64r26bryrIqy77vyrJui67r66Ys67oqy8Lu6roxzLat+6Lr6roqy7qvyrKuu7ru+7JuC7umqrpuyrKvm7Ks+7auC8us27oxuq7vq7It/KosC7+u+8Iy6z5jdF1fV21ZGFbZ9n3d95Vj1nVhWW1b+V1bZ7y+bgy7bvzKrQvLstq2scy6rSyvrxvDLux8W/iVmqratum6um7Ksq/Lui60dd1XRtf1fdW2fV+VZd+3hV9pG8OwjK6r+6os68Jry8ov67qw7MIvLKttK7+r68ow27qw3L6wLL/uC8uq277v6rrStXVluX2fsSu38QsAABhwAAAIMKEMFBqyIgCIEwBAEHIOKQahYgpCCKGkEEIqFWNSMuakZM5JKaWUFEpJrWJMSuaclMwxKaGUlkopqYRSWiqlxBRKaS2l1mJKqcVQSmulpNZKSa2llGJMrcUYMSYlc05K5pyUklJrJZXWMucoZQ5K6iCklEoqraTUYuacpA46Kx2E1EoqMZWUYgupxFZKaq2kFGMrMdXUWo4hpRhLSrGVlFptMdXWWqs1YkxK5pyUzDkqJaXWSiqtZc5J6iC01DkoqaTUYiopxco5SR2ElDLIqJSUWiupxBJSia20FGMpqcXUYq4pxRZDSS2WlFosqcTWYoy1tVRTJ6XFklKMJZUYW6y5ttZqDKXEVkqLsaSUW2sx1xZjjqGkFksrsZWUWmy15dhayzW1VGNKrdYWY40x5ZRrrT2n1mJNMdXaWqy51ZZbzLXnTkprpZQWS0oxttZijTHmHEppraQUWykpxtZara3FXEMpsZXSWiypxNhirLXFVmNqrcYWW62ltVprrb3GVlsurdXcYqw9tZRrrLXmWFNtBQAADDgAAASYUAYKDVkJAEQBAADGMMYYhEYpx5yT0ijlnHNSKucghJBS5hyEEFLKnINQSkuZcxBKSSmUklJqrYVSUmqttQIAAAocAAACbNCUWByg0JCVAEAqAIDBcTRNFFXVdX1fsSxRVFXXlW3jVyxNFFVVdm1b+DVRVFXXtW3bFn5NFFVVdmXZtoWiqrqybduybgvDqKqua9uybeuorqvbuq3bui9UXVmWbVu3dR3XtnXd9nVd+Bmzbeu2buu+8CMMR9/4IeTj+3RCCAAAT3AAACqwYXWEk6KxwEJDVgIAGQAAgDFKGYUYM0gxphhjTDHGmAAAgAEHAIAAE8pAoSErAoAoAADAOeecc84555xzzjnnnHPOOeecc44xxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY0wAwE6EA8BOhIVQaMhKACAcAABACCEpKaWUUkoRU85BSSmllFKqFIOMSkoppZRSpBR1lFJKKaWUIqWgpJJSSimllElJKaWUUkoppYw6SimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaVUSimllFJKKaWUUkoppRQAYPLgAACVYOMMK0lnhaPBhYasBAByAwAAhRiDEEJpraRUUkolVc5BKCWUlEpKKZWUUqqYgxBKKqmlklJKKbXSQSihlFBKKSWUUkooJYQQSgmhlFRCK6mEUkoHoYQSQimhhFRKKSWUzkEoIYUOQkmllNRCSB10VFIpIZVSSiklpZQ6CKGUklJLLZVSWkqpdBJSKamV1FJqqbWSUgmhpFZKSSWl0lpJJbUSSkklpZRSSymFVFJJJYSSUioltZZaSqm11lJIqZWUUkqppdRSSiWlkEpKqZSSUmollZRSaiGVlEpJKaTUSimlpFRCSamlUlpKLbWUSkmptFRSSaWUlEpJKaVSSksppRJKSqmllFpJKYWSUkoplZJSSyW1VEoKJaWUUkmptJRSSymVklIBAEAHDgAAAUZUWoidZlx5BI4oZJiAAgAAQABAgAkgMEBQMApBgDACAQAAAADAAAAfAABHARAR0ZzBAUKCwgJDg8MDAAAAAAAAAAAAAACAT2dnUwAEAAAAAAAAAADqnjMlAgAAADzQPmcBAQA="),s&&r("audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var u=(new Date).getTime(),c=window.setInterval(function(){var r=(new Date).getTime();n&&!(r-u>5e3)||(window.clearInterval(c),e(t))},1)}else e(t)}}(),function(e){"use strict";e.GM=function(e){var t=function(e){return e.replace(/[^a-z0-9 ]/gi,"").replace(/[ ]/g,"_").toLowerCase()},n={byName:{},byId:{},byCategory:{}};for(var r in e)for(var o=e[r],a=0,i=o.length;a<i;a++){var s=o[a];if(s){var u=parseInt(s.substr(0,s.indexOf(" ")),10);s=s.replace(u+" ",""),n.byId[--u]=n.byName[t(s)]=n.byCategory[t(r)]={id:t(s),instrument:s,number:u,category:r}}}return n}({Piano:["1 Acoustic Grand Piano","2 Bright Acoustic Piano","3 Electric Grand Piano","4 Honky-tonk Piano","5 Electric Piano 1","6 Electric Piano 2","7 Harpsichord","8 Clavinet"],"Chromatic Percussion":["9 Celesta","10 Glockenspiel","11 Music Box","12 Vibraphone","13 Marimba","14 Xylophone","15 Tubular Bells","16 Dulcimer"],Organ:["17 Drawbar Organ","18 Percussive Organ","19 Rock Organ","20 Church Organ","21 Reed Organ","22 Accordion","23 Harmonica","24 Tango Accordion"],Guitar:["25 Acoustic Guitar (nylon)","26 Acoustic Guitar (steel)","27 Electric Guitar (jazz)","28 Electric Guitar (clean)","29 Electric Guitar (muted)","30 Overdriven Guitar","31 Distortion Guitar","32 Guitar Harmonics"],Bass:["33 Acoustic Bass","34 Electric Bass (finger)","35 Electric Bass (pick)","36 Fretless Bass","37 Slap Bass 1","38 Slap Bass 2","39 Synth Bass 1","40 Synth Bass 2"],Strings:["41 Violin","42 Viola","43 Cello","44 Contrabass","45 Tremolo Strings","46 Pizzicato Strings","47 Orchestral Harp","48 Timpani"],Ensemble:["49 String Ensemble 1","50 String Ensemble 2","51 Synth Strings 1","52 Synth Strings 2","53 Choir Aahs","54 Voice Oohs","55 Synth Choir","56 Orchestra Hit"],Brass:["57 Trumpet","58 Trombone","59 Tuba","60 Muted Trumpet","61 French Horn","62 Brass Section","63 Synth Brass 1","64 Synth Brass 2"],Reed:["65 Soprano Sax","66 Alto Sax","67 Tenor Sax","68 Baritone Sax","69 Oboe","70 English Horn","71 Bassoon","72 Clarinet"],Pipe:["73 Piccolo","74 Flute","75 Recorder","76 Pan Flute","77 Blown Bottle","78 Shakuhachi","79 Whistle","80 Ocarina"],"Synth Lead":["81 Lead 1 (square)","82 Lead 2 (sawtooth)","83 Lead 3 (calliope)","84 Lead 4 (chiff)","85 Lead 5 (charang)","86 Lead 6 (voice)","87 Lead 7 (fifths)","88 Lead 8 (bass + lead)"],"Synth Pad":["89 Pad 1 (new age)","90 Pad 2 (warm)","91 Pad 3 (polysynth)","92 Pad 4 (choir)","93 Pad 5 (bowed)","94 Pad 6 (metallic)","95 Pad 7 (halo)","96 Pad 8 (sweep)"],"Synth Effects":["97 FX 1 (rain)","98 FX 2 (soundtrack)","99 FX 3 (crystal)","100 FX 4 (atmosphere)","101 FX 5 (brightness)","102 FX 6 (goblins)","103 FX 7 (echoes)","104 FX 8 (sci-fi)"],Ethnic:["105 Sitar","106 Banjo","107 Shamisen","108 Koto","109 Kalimba","110 Bagpipe","111 Fiddle","112 Shanai"],Percussive:["113 Tinkle Bell","114 Agogo","115 Steel Drums","116 Woodblock","117 Taiko Drum","118 Melodic Tom","119 Synth Drum"],"Sound effects":["120 Reverse Cymbal","121 Guitar Fret Noise","122 Breath Noise","123 Seashore","124 Bird Tweet","125 Telephone Ring","126 Helicopter","127 Applause","128 Gunshot"]}),e.getInstrument=function(t){var n=e.channels[t];return n&&n.instrument},e.setInstrument=function(t,n,r){var o=e.channels[t];if(r)return setTimeout(function(){o.instrument=n},r);o.instrument=n},e.getMono=function(t){var n=e.channels[t];return n&&n.mono},e.setMono=function(t,n,r){var o=e.channels[t];if(r)return setTimeout(function(){o.mono=n},r);o.mono=n},e.getOmni=function(t){var n=e.channels[t];return n&&n.omni},e.setOmni=function(t,n){var r=e.channels[t];if(delay)return setTimeout(function(){r.omni=n},delay);r.omni=n},e.getSolo=function(t){var n=e.channels[t];return n&&n.solo},e.setSolo=function(t,n){var r=e.channels[t];if(delay)return setTimeout(function(){r.solo=n},delay);r.solo=n},e.channels=function(){for(var e={},t=0;t<16;t++)e[t]={instrument:t,pitchBend:0,mute:!1,mono:!1,omni:!1,solo:!1};return e}(),e.keyToNote={},e.noteToKey={},function(){for(var t=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],n=21;n<=108;n++){var r=t[n%12]+((n-12)/12>>0);e.keyToNote[r]=n,e.noteToKey[n]=r}}()}(MIDI),void 0===MIDI&&(MIDI={}),MIDI.Soundfont=MIDI.Soundfont||{},MIDI.Player=MIDI.Player||{},function(e){"use strict";e.DEBUG=!0,e.USE_XHR=!0,e.soundfontUrl="./soundfont/",e.loadPlugin=function(n){"function"==typeof n&&(n={onsuccess:n}),e.soundfontUrl=n.soundfontUrl||e.soundfontUrl,e.audioDetect(function(r){var o=window.location.hash,a="";if(r[n.api]?a=n.api:r[o.substr(1)]?a=o.substr(1):r.webmidi?a="webmidi":window.AudioContext?a="webaudio":window.Audio&&(a="audiotag"),t[a]){if(n.targetFormat)var i=n.targetFormat;else i=r["audio/ogg"]?"ogg":"mp3";e.__api=a,e.__audioFormat=i,e.supports=r,e.loadResource(n)}})},e.loadResource=function(n){var r=n.instruments||n.instrument||"acoustic_grand_piano";"object"!=typeof r&&(r=r||0===r?[r]:[]);for(var o=0;o<r.length;o++){var a=r[o];a===+a&&e.GM.byId[a]&&(r[o]=e.GM.byId[a].id)}n.format=e.__audioFormat,n.instruments=r,t[e.__api](n)};var t={webmidi:function(t){e.WebMIDI.connect(t)},audiotag:function(e){n(e,"AudioTag")},webaudio:function(e){n(e,"WebAudio")}},n=function(t,n){for(var o=t.format,a=t.instruments,i=t.onprogress,s=t.onerror,u=a.length,c=u,l=function(){--c||(i&&i("load",1),e[n].connect(t))},d=0;d<u;d++){var f=a[d];MIDI.Soundfont[f]?l():r(a[d],o,function(e,t){i&&i("load",t/u+(u-c)/u,f)},function(){l()},s)}},r=function(t,n,r,o,a){var i=e.soundfontUrl+t+"-"+n+".js";e.USE_XHR?e.util.request({url:i,format:"text",onerror:a,onprogress:r,onsuccess:function(e,t){var n=document.createElement("script");n.language="javascript",n.type="text/javascript",n.text=t,document.body.appendChild(n),o()}}):dom.loadScript.add({url:i,verify:'MIDI.Soundfont["'+t+'"]',onerror:a,onsuccess:function(){o()}})};e.setDefaultPlugin=function(t){for(var n in t)e[n]=t[n]}}(MIDI),function(e){"use strict";window.Audio&&function(){for(var t=e.AudioTag={api:"audiotag"},n={},r=127,o=-1,a=[],i=[],s={},u=0;u<12;u++)a[u]=new Audio;var c=function(t,n){if(e.channels[t]){var u=e.channels[t].instrument,c=e.GM.byId[u].id;if(n=s[n]){var l=c+""+n.id,d=(o+1)%a.length,f=a[d];if(i[d]=l,!e.Soundfont[c])return void(e.DEBUG&&console.log("404",c));f.src=e.Soundfont[c][n.id],f.volume=r/127,f.play(),o=d}}},l=function(t,n){if(e.channels[t]){var r=e.channels[t].instrument,u=e.GM.byId[r].id;if(n=s[n])for(var c=u+""+n.id,l=0,d=a.length;l<d;l++){var f=(l+o+1)%d,p=i[f];if(p&&p==c)return a[f].pause(),void(i[f]=null)}}};t.audioBuffers=a,t.send=function(e,t){},t.setController=function(e,t,n,r){},t.setVolume=function(e,t){r=t},t.programChange=function(t,n){e.channels[t].instrument=n},t.pitchBend=function(e,t,n){},t.noteOn=function(e,t,r,o){var a=n[t];if(s[a])return o?setTimeout(function(){c(e,a)},1e3*o):void c(e,a)},t.noteOff=function(e,t,n){},t.chordOn=function(e,t,r,o){for(var a=0;a<t.length;a++){var i=t[a],u=n[i];if(s[u]){if(o)return setTimeout(function(){c(e,u)},1e3*o);c(e,u)}}},t.chordOff=function(e,t,r){for(var o=0;o<t.length;o++){var a=t[o],i=n[a];if(s[i]){if(r)return setTimeout(function(){l(e,i)},1e3*r);l(e,i)}}},t.stopAllNotes=function(){for(var e=0,t=a.length;e<t;e++)a[e].pause()},t.connect=function(r){for(var o in e.setDefaultPlugin(t),e.keyToNote)n[e.keyToNote[o]]=o,s[o]={id:o};r.onsuccess&&r.onsuccess()}}()}(MIDI),function(e){"use strict";var t,n,r,o,a,i;window.AudioContext&&(n=e.WebAudio={api:"webaudio"},r={},o={},a=127,i={},n.audioBuffers=i,n.send=function(e,t){},n.setController=function(e,t,n,r){},n.setVolume=function(e,t,n){n?setTimeout(function(){a=t},1e3*n):a=t},n.programChange=function(t,n,r){e.channels[t].instrument=n},n.pitchBend=function(t,n,r){e.channels[t].pitchBend=n},n.noteOn=function(n,s,u,c){c=c||0;var l=e.channels[n].instrument,d=i[l+""+s];if(d){var f;if(c<t.currentTime&&(c+=t.currentTime),(f=t.createBufferSource()).buffer=d,o){var p=f;for(var h in o)p.connect(o[h].input),p=o[h]}var m=u/127*(a/127)*2-1;return f.connect(t.destination),f.playbackRate.value=1,f.gainNode=t.createGain(),f.gainNode.connect(t.destination),f.gainNode.gain.value=Math.min(1,Math.max(-1,m)),f.connect(f.gainNode),f.start(c||0),r[n+""+s]=f,f}},n.noteOff=function(n,o,a){a=a||0;var s=e.channels[n].instrument,u=i[s+""+o];if(u){a<t.currentTime&&(a+=t.currentTime);var c=r[n+""+o];if(c){if(c.gainNode){var l=c.gainNode.gain;l.linearRampToValueAtTime(l.value,a),l.linearRampToValueAtTime(-1,a+.3)}return c.noteOff?c.noteOff(a+.5):c.stop(a+.5),delete r[n+""+o],c}}},n.chordOn=function(e,t,r,o){for(var a,i={},s=0,u=t.length;s<u;s++)i[a=t[s]]=n.noteOn(e,a,r,o);return i},n.chordOff=function(e,t,r){for(var o,a={},i=0,s=t.length;i<s;i++)a[o=t[i]]=n.noteOff(e,o,r);return a},n.stopAllNotes=function(){for(var e in r){var n=0;n<t.currentTime&&(n+=t.currentTime);var o=r[e];o.gain.linearRampToValueAtTime(1,n),o.gain.linearRampToValueAtTime(0,n+.3),o.noteOff?o.noteOff(n+.3):o.stop(n+.3),delete r[e]}},n.setEffects=function(e){if(!t.tunajs)return console.log("Effects module not installed.");for(var n=0;n<e.length;n++){var r=e[n],a=new t.tunajs[r.type](r);a.connect(t.destination),o[r.type]=a}},n.connect=function(r){e.setDefaultPlugin(n),n.setContext(t||new(window.AudioContext||window.webkitAudioContext),r.onsuccess)},n.getContext=function(){return t},n.setContext=function(n,r,o,a){t=n,"undefined"==typeof Tuna||t.tunajs||(t.tunajs=new Tuna(t));var s=[],u=e.keyToNote;for(var c in u)s.push(c);var l=function(e){for(var t in f)if(f[t])return;r&&(r(),r=null)},d=function(n,r,o,a){var s=n[a];s&&(f[r]++,function(e,n,r){if(0===e.indexOf("data:audio")){var o=e.split(",")[1],a=Base64Binary.decodeArrayBuffer(o);t.decodeAudioData(a,n,r)}else{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){t.decodeAudioData(i.response,n,r)},i.send()}}(s,function(t){t.id=a;var o=e.keyToNote[a];i[r+""+o]=t,0==--f[r]&&(n.isLoaded=!0,l())},function(e){}))},f={};for(var p in e.Soundfont){var h=e.Soundfont[p];if(!h.isLoaded){var m=e.GM.byName[p].number;f[m]=0;for(var g=0;g<s.length;g++)d(h,m,0,c=s[g])}}setTimeout(l,1)})}(MIDI),function(e){"use strict";var t=null,n=e.WebMIDI={api:"webmidi"};n.send=function(e,n){t.send(e,1e3*n)},n.setController=function(e,n,r,o){t.send([e,n,r],1e3*o)},n.setVolume=function(e,n,r){t.send([176+e,7,n],1e3*r)},n.programChange=function(e,n,r){t.send([192+e,n],1e3*r)},n.pitchBend=function(e,n,r){t.send([224+e,n],1e3*r)},n.noteOn=function(e,n,r,o){t.send([144+e,n,r],1e3*o)},n.noteOff=function(e,n,r){t.send([128+e,n,0],1e3*r)},n.chordOn=function(e,n,r,o){for(var a=0;a<n.length;a++){var i=n[a];t.send([144+e,i,r],1e3*o)}},n.chordOff=function(e,n,r){for(var o=0;o<n.length;o++){var a=n[o];t.send([128+e,a,0],1e3*r)}},n.stopAllNotes=function(){t.cancel();for(var e=0;e<16;e++)t.send([176+e,123,0])},n.connect=function(r){e.setDefaultPlugin(n);var o=function(t){if(window.AudioContext)r.api="webaudio";else{if(!window.Audio)return;r.api="audiotag"}e.loadPlugin(r)};navigator.requestMIDIAccess().then(function(e){var n=e.outputs;void 0===(t="function"==typeof n?n()[0]:n[0])?o():r.onsuccess&&r.onsuccess()},o)}}(MIDI),void 0===MIDI&&(MIDI={}),void 0===MIDI.Player&&(MIDI.Player={}),function(){"use strict";var e=MIDI.Player;e.currentTime=0,e.endTime=0,e.restart=0,e.playing=!1,e.timeWarp=1,e.startDelay=0,e.BPM=120,e.start=e.resume=function(t){e.currentTime<-1&&(e.currentTime=-1),l(e.currentTime,null,t)},e.pause=function(){var t=e.restart;d(),e.restart=t},e.stop=function(){d(),e.restart=0,e.currentTime=0},e.addListener=function(e){i=e},e.removeListener=function(){i=void 0},e.clearAnimation=function(){e.animationFrameId&&cancelAnimationFrame(e.animationFrameId)},e.setAnimation=function(t){var n=0,r=0,o=0;e.clearAnimation();var i=function(){if(e.animationFrameId=requestAnimationFrame(i),0!==e.endTime){e.playing?(n=o===e.currentTime?r-Date.now():0,n=0===e.currentTime?0:e.currentTime-n,o!==e.currentTime&&(r=Date.now(),o=e.currentTime)):n=e.currentTime;var s=e.endTime,u=n/1e3,c=u/60,l=60*c+(u-60*c),d=s/1e3;d-l<-1||t({now:l,end:d,events:a})}};requestAnimationFrame(i)},e.loadMidiFile=function(t,n,r){try{e.replayer=new Replayer(MidiFile(e.currentData),e.timeWarp,null,e.BPM),e.data=e.replayer.getData(),e.endTime=c(),MIDI.loadPlugin({onsuccess:t,onprogress:n,onerror:r})}catch(e){r&&r(e)}},e.loadFile=function(t,n,r,o){if(e.stop(),-1!==t.indexOf("base64,")){var a=window.atob(t.split(",")[1]);e.currentData=a,e.loadMidiFile(n,r,o)}else{var i=new XMLHttpRequest;i.open("GET",t),i.overrideMimeType("text/plain; charset=x-user-defined"),i.onreadystatechange=function(){if(4===this.readyState)if(200===this.status){for(var t=this.responseText||"",a=[],i=t.length,s=String.fromCharCode,u=0;u<i;u++)a[u]=s(255&t.charCodeAt(u));var c=a.join("");e.currentData=c,e.loadMidiFile(n,r,o)}else o&&o("Unable to load MIDI file")},i.send()}},e.getFileInstruments=function(){for(var t={},n={},r=0;r<e.data.length;r++){var o=e.data[r][0].event;if("channel"===o.type){var a=o.channel;switch(o.subtype){case"controller":break;case"programChange":n[a]=o.programNumber;break;case"noteOn":var i=n[a];t[MIDI.GM.byId[isFinite(i)?i:a].id]=!0}}}var s=[];for(var u in t)s.push(u);return s};var t,n,r=[],o=0,a={},i=void 0,s=function(n,o,s,u,c,d,f){return setTimeout(function(){var u={channel:n,note:o,now:s,end:e.endTime,message:c,velocity:d};128===c?delete a[o]:a[o]=u,i&&i(u),e.currentTime=s,r.shift(),(r.length<1e3||e.currentTime===t&&t<e.endTime)&&l(t,!0)},s-u)},u=function(){return"webaudio"===MIDI.api?MIDI.WebAudio.getContext():(e.ctx={currentTime:0},e.ctx)},c=function(){for(var t=e.data,n=t.length,r=.5,o=0;o<n;o++)r+=t[o][1];return r},l=function(a,i,l){if(e.replayer){var f;i||(void 0===a&&(a=e.restart),e.playing&&d(),e.playing=!0,e.data=e.replayer.getData(),e.endTime=c());var p=0,h=0,m=e.data,g=u(),A=m.length;t=.5;r[0]&&r[0].interval;var v=a-e.currentTime;if("webaudio"!==MIDI.api){var y=window.performance&&window.performance.now?window.performance.now():Date.now();n=n||y,g.currentTime=(y-n)/1e3}o=g.currentTime;for(var b=0;b<A&&h<100;b++){var I=m[b];if((t+=I[1])<=a)p=t;else{a=t-p;var w=I[0].event;if("channel"===w.type){var S=w.channel,q=MIDI.channels[S],B=g.currentTime+(a+v+e.startDelay)/1e3,M=t-p+e.startDelay;switch(w.subtype){case"controller":MIDI.setController(S,w.controllerType,w.value,B);break;case"programChange":MIDI.programChange(S,w.programNumber,B);break;case"pitchBend":MIDI.pitchBend(S,w.value,B);break;case"noteOn":if(q.mute)break;f=w.noteNumber-(e.MIDIOffset||0),r.push({event:w,time:M,source:MIDI.noteOn(S,w.noteNumber,w.velocity,B),interval:s(S,f,t+e.startDelay,p-v,144,w.velocity)}),h++;break;case"noteOff":if(q.mute)break;f=w.noteNumber-(e.MIDIOffset||0),r.push({event:w,time:M,source:MIDI.noteOff(S,w.noteNumber,B),interval:s(S,f,t,p-v,128,0)})}}}}l&&l(r)}},d=function(){var t=u();for(e.playing=!1,e.restart+=1e3*(t.currentTime-o);r.length;){var n=r.pop();window.clearInterval(n.interval),n.source&&("number"==typeof n.source?window.clearTimeout(n.source):n.source.disconnect(0))}for(var s in a){n=a[s];144===a[s].message&&i&&i({channel:n.channel,note:n.note,now:n.now,end:n.end,message:128,velocity:n.velocity})}a={}}}(),void 0===MIDI)var MIDI={};if(MIDI.Synesthesia=MIDI.Synesthesia||{},function(e){e.data={"Isaac Newton (1704)":{format:"HSL",ref:"Gerstner, p.167",english:["red",null,"orange",null,"yellow","green",null,"blue",null,"indigo",null,"violet"],0:[0,96,51],1:[0,0,0],2:[29,94,52],3:[0,0,0],4:[60,90,60],5:[135,76,32],6:[0,0,0],7:[248,82,28],8:[0,0,0],9:[302,88,26],10:[0,0,0],11:[325,84,46]},"Louis Bertrand Castel (1734)":{format:"HSL",ref:"Peacock, p.400",english:["blue","blue-green","green","olive green","yellow","yellow-orange","orange","red","crimson","violet","agate","indigo"],0:[248,82,28],1:[172,68,34],2:[135,76,32],3:[79,59,36],4:[60,90,60],5:[49,90,60],6:[29,94,52],7:[360,96,51],8:[1,89,33],9:[325,84,46],10:[273,80,27],11:[302,88,26]},"George Field (1816)":{format:"HSL",ref:"Klein, p.69",english:["blue",null,"purple",null,"red","orange",null,"yellow",null,"yellow green",null,"green"],0:[248,82,28],1:[0,0,0],2:[302,88,26],3:[0,0,0],4:[360,96,51],5:[29,94,52],6:[0,0,0],7:[60,90,60],8:[0,0,0],9:[79,59,36],10:[0,0,0],11:[135,76,32]},"D. D. Jameson (1844)":{format:"HSL",ref:"Jameson, p.12",english:["red","red-orange","orange","orange-yellow","yellow","green","green-blue","blue","blue-purple","purple","purple-violet","violet"],0:[360,96,51],1:[14,91,51],2:[29,94,52],3:[49,90,60],4:[60,90,60],5:[135,76,32],6:[172,68,34],7:[248,82,28],8:[273,80,27],9:[302,88,26],10:[313,78,37],11:[325,84,46]},"Theodor Seemann (1881)":{format:"HSL",ref:"Klein, p.86",english:["carmine","scarlet","orange","yellow-orange","yellow","green","green blue","blue","indigo","violet","brown","black"],0:[0,58,26],1:[360,96,51],2:[29,94,52],3:[49,90,60],4:[60,90,60],5:[135,76,32],6:[172,68,34],7:[248,82,28],8:[302,88,26],9:[325,84,46],10:[0,58,26],11:[0,0,3]},"A. Wallace Rimington (1893)":{format:"HSL",ref:"Peacock, p.402",english:["deep red","crimson","orange-crimson","orange","yellow","yellow-green","green","blueish green","blue-green","indigo","deep blue","violet"],0:[360,96,51],1:[1,89,33],2:[14,91,51],3:[29,94,52],4:[60,90,60],5:[79,59,36],6:[135,76,32],7:[163,62,40],8:[172,68,34],9:[302,88,26],10:[248,82,28],11:[325,84,46]},"Bainbridge Bishop (1893)":{format:"HSL",ref:"Bishop, p.11",english:["red","orange-red or scarlet","orange","gold or yellow-orange","yellow or green-gold","yellow-green","green","greenish-blue or aquamarine","blue","indigo or violet-blue","violet","violet-red","red"],0:[360,96,51],1:[1,89,33],2:[29,94,52],3:[50,93,52],4:[60,90,60],5:[73,73,55],6:[135,76,32],7:[163,62,40],8:[302,88,26],9:[325,84,46],10:[343,79,47],11:[360,96,51]},"H. von Helmholtz (1910)":{format:"HSL",ref:"Helmholtz, p.22",english:["yellow","green","greenish blue","cayan-blue","indigo blue","violet","end of red","red","red","red","red orange","orange"],0:[60,90,60],1:[135,76,32],2:[172,68,34],3:[211,70,37],4:[302,88,26],5:[325,84,46],6:[330,84,34],7:[360,96,51],8:[10,91,43],9:[10,91,43],10:[8,93,51],11:[28,89,50]},"Alexander Scriabin (1911)":{format:"HSL",ref:"Jones, p.104",english:["red","violet","yellow","steely with the glint of metal","pearly blue the shimmer of moonshine","dark red","bright blue","rosy orange","purple","green","steely with a glint of metal","pearly blue the shimmer of moonshine"],0:[360,96,51],1:[325,84,46],2:[60,90,60],3:[245,21,43],4:[211,70,37],5:[1,89,33],6:[248,82,28],7:[29,94,52],8:[302,88,26],9:[135,76,32],10:[245,21,43],11:[211,70,37]},"Adrian Bernard Klein (1930)":{format:"HSL",ref:"Klein, p.209",english:["dark red","red","red orange","orange","yellow","yellow green","green","blue-green","blue","blue violet","violet","dark violet"],0:[0,91,40],1:[360,96,51],2:[14,91,51],3:[29,94,52],4:[60,90,60],5:[73,73,55],6:[135,76,32],7:[172,68,34],8:[248,82,28],9:[292,70,31],10:[325,84,46],11:[330,84,34]},"August Aeppli (1940)":{format:"HSL",ref:"Gerstner, p.169",english:["red",null,"orange",null,"yellow",null,"green","blue-green",null,"ultramarine blue","violet","purple"],0:[0,96,51],1:[0,0,0],2:[29,94,52],3:[0,0,0],4:[60,90,60],5:[0,0,0],6:[135,76,32],7:[172,68,34],8:[0,0,0],9:[211,70,37],10:[273,80,27],11:[302,88,26]},"I. J. Belmont (1944)":{ref:"Belmont, p.226",english:["red","red-orange","orange","yellow-orange","yellow","yellow-green","green","blue-green","blue","blue-violet","violet","red-violet"],0:[360,96,51],1:[14,91,51],2:[29,94,52],3:[50,93,52],4:[60,90,60],5:[73,73,55],6:[135,76,32],7:[172,68,34],8:[248,82,28],9:[313,78,37],10:[325,84,46],11:[338,85,37]},"Steve Zieverink (2004)":{format:"HSL",ref:"Cincinnati Contemporary Art Center",english:["yellow-green","green","blue-green","blue","indigo","violet","ultra violet","infra red","red","orange","yellow-white","yellow"],0:[73,73,55],1:[135,76,32],2:[172,68,34],3:[248,82,28],4:[302,88,26],5:[325,84,46],6:[326,79,24],7:[1,89,33],8:[360,96,51],9:[29,94,52],10:[62,78,74],11:[60,90,60]},"Circle of Fifths (Johnston 2003)":{format:"RGB",ref:"Joseph Johnston",english:["yellow","blue","orange","teal","red","green","purple","light orange","light blue","dark orange","dark green","violet"],0:[255,255,0],1:[50,0,255],2:[255,150,0],3:[0,210,180],4:[255,0,0],5:[130,255,0],6:[150,0,200],7:[255,195,0],8:[30,130,255],9:[255,100,0],10:[0,200,0],11:[225,0,225]},"Circle of Fifths (Wheatman 2002)":{format:"HEX",ref:"Stuart Wheatman",english:[],data:["#122400","#2E002E","#002914","#470000","#002142","#2E2E00","#290052","#003D00","#520029","#003D3D","#522900","#000080","#244700","#570057","#004D26","#7A0000","#003B75","#4C4D00","#47008F","#006100","#850042","#005C5C","#804000","#0000C7","#366B00","#80007F","#00753B","#B80000","#0057AD","#6B6B00","#6600CC","#008A00","#B8005C","#007F80","#B35900","#2424FF","#478F00","#AD00AD","#00994D","#F00000","#0073E6","#8F8F00","#8A14FF","#00AD00","#EB0075","#00A3A3","#E07000","#6B6BFF","#5CB800","#DB00DB","#00C261","#FF5757","#3399FF","#ADAD00","#B56BFF","#00D600","#FF57AB","#00C7C7","#FF9124","#9999FF","#6EDB00","#FF29FF","#00E070","#FF9999","#7ABDFF","#D1D100","#D1A3FF","#00FA00","#FFA3D1","#00E5E6","#FFC285","#C2C2FF","#80FF00","#FFA8FF","#00E070","#FFCCCC","#C2E0FF","#F0F000","#EBD6FF","#ADFFAD","#FFD6EB","#8AFFFF","#FFEBD6","#EBEBFF","#E0FFC2","#FFEBFF","#E5FFF2","#FFF5F5"]}},e.map=function(t){for(var n,r,o,a,i,s,u={},c=e.data,l=c[t]||c["D. D. Jameson (1844)"],d=0;d<=88;d++)if(l.data)u[d]={hsl:l.data[d],hex:l.data[d]};else{var f=l[(d+9)%12];switch(l.format){case"RGB":r=(f=Color.Space(f,"RGB>HSL")).H>>0,o=f.S>>0,a=f.L>>0;break;case"HSL":r=f[0],o=f[1],a=f[2]}r===o&&o===a&&(i=n,s=l[(d+10)%12],f=[.5*i[0]+.5*s[0]+.5>>0,.5*i[1]+.5*s[1]+.5>>0,.5*i[2]+.5*s[2]+.5>>0]),u[d]={hsl:"hsla("+r+","+o+"%,"+a+"%, 1)",hex:Color.Space({H:r,S:o,L:a},"HSL>RGB>HEX>W3")},n=f}return u}}(MIDI.Synesthesia),void 0===MIDI&&(MIDI={}),function(e){if((e.util||(e.util={})).request=function(n,r,o,a){"use strict";"string"==typeof n&&(n={url:n});var i=n.data,s=n.url,u=n.method||(n.data?"POST":"GET"),c=n.format,l=n.headers,d=n.responseType,f=n.withCredentials||!1;r=r||n.onsuccess,o=o||n.onerror,a=a||n.onprogress;if(void 0===t||!e.loc.isLocalUrl(s)){var p=new XMLHttpRequest;if(p.open(u,s,!0),l)for(var h in l)p.setRequestHeader(h,l[h]);else i&&p.setRequestHeader("Content-type","application/x-www-form-urlencoded");return"binary"===c&&p.overrideMimeType&&p.overrideMimeType("text/plain; charset=x-user-defined"),d&&(p.responseType=d),f&&(p.withCredentials="true"),o&&"onerror"in p&&(p.onerror=o),a&&p.upload&&"onprogress"in p.upload&&(i?p.upload.onprogress=function(e){a.call(p,e,event.loaded/event.total)}:p.addEventListener("progress",function(e){var t=0;if(e.lengthComputable)t=e.total;else if(p.totalBytes)t=p.totalBytes;else{var n=parseInt(p.getResponseHeader("Content-Length-Raw"));if(!isFinite(n))return;p.totalBytes=t=n}a.call(p,e,e.loaded/t)})),p.onreadystatechange=function(t){if(4===p.readyState)if(200===p.status||304===p.status||308===p.status||0===p.status&&e.client.cordova){if(r){var n;if("xml"===c)n=t.target.responseXML;else if("text"===c)n=t.target.responseText;else if("json"===c)try{n=JSON.parse(t.target.response)}catch(e){o&&o.call(p,t)}r.call(p,t,n)}}else o&&o.call(p,t)},p.send(i),p}t.readFile(s,"utf8",function(e,t){e?o&&o(e):r&&r({responseText:t})})},"undefined"!=typeof module&&module.exports){var t=require("fs");XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest,module.exports=e.util.request}}(MIDI),void 0===dom)var dom={};if(function(){"use strict";dom.loadScript=function(){return this.loaded={},this.loading={},this},dom.loadScript.prototype.add=function(t){var n=this;"string"==typeof t&&(t={url:t});var r=t.urls;void 0===r&&(r=[{url:t.url,verify:t.verify}]);var o=document.getElementsByTagName("head")[0],a=function(t,r){n.loaded[t.url]||r&&!1===e(r)||(n.loaded[t.url]=!0,n.loading[t.url]&&n.loading[t.url](),delete n.loading[t.url],t.onsuccess&&t.onsuccess(),void 0!==f&&f())},i=!1,s=[],u=function(e){if("string"==typeof e&&(e={url:e,verify:t.verify}),/([\w\d.\[\]\'\"])$/.test(e.verify)){var r=e.test=e.verify;if("object"==typeof r)for(var u=0;u<r.length;u++)s.push(r[u]);else s.push(r)}if(!n.loaded[e.url]){var l=document.createElement("script");l.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||a(e)},l.onload=function(){a(e)},l.onerror=function(){if(i=!0,delete n.loading[e.url],"object"==typeof e.test)for(var t in e.test)c(e.test[t]);else c(e.test)},l.setAttribute("type","text/javascript"),l.setAttribute("src",e.url),o.appendChild(l),n.loading[e.url]=function(){}}},c=function(e){for(var t=[],n=0;n<s.length;n++)s[n]!==e&&t.push(s[n]);s=t},l=function(n){if(n)a(n,n.test);else for(var o=0;o<r.length;o++)a(r[o],r[o].test);var u=!0;for(o=0;o<s.length;o++)!1===e(s[o])&&(u=!1);!t.strictOrder&&u?i?t.error&&t.error():t.onsuccess&&t.onsuccess():setTimeout(function(){l(n)},10)};if(t.strictOrder){var d=-1,f=function(){if(d++,r[d]){var e=r[d],o=e.url;n.loading[o]?n.loading[o]=function(){e.onsuccess&&e.onsuccess(),f()}:n.loaded[o]?f():(u(e),l(e))}else i?t.error&&t.error():t.onsuccess&&t.onsuccess()};f()}else for(d=0;d<r.length;d++)u(r[d]),l(r[d])},dom.loadScript=new dom.loadScript;var e=function(e,t){try{for(var n=(e=e.split('"').join("").split("'").join("").split("]").join("").split("[").join(".")).split("."),r=n.length,o=t||window,a=0;a<r;a++){var i=n[a];if(null==o[i])return!1;o=o[i]}return!0}catch(e){return!1}}}(),"undefined"!=typeof module&&module.exports&&(module.exports=dom.loadScript),void 0===Color)var Color={};void 0===Color.Space&&(Color.Space={}),function(){"use strict";var useEval=!1,functions={},shortcuts={"HEX24>HSL":"HEX24>RGB>HSL","HEX32>HSLA":"HEX32>RGBA>HSLA","HEX24>CMYK":"HEX24>RGB>CMY>CMYK","RGB>CMYK":"RGB>CMY>CMYK"},root=Color.Space=function(color,route){shortcuts[route]&&(route=shortcuts[route]);var r=route.split(">");if("object"==typeof color&&color[0]>=0){for(var type=r[0],tmp={},i=0;i<type.length;i++){var str=type.substr(i,1);tmp[str]=color[i]}color=tmp}if(functions[route])return functions[route](color);for(var f="color",pos=1,key=r[0];pos<r.length;pos++)pos>1&&(key=key.substr(key.indexOf("_")+1)),key+=(0===pos?"":"_")+r[pos],color=root[key](color),useEval&&(f="Color.Space."+key+"("+f+")");return useEval&&(functions[route]=eval("(function(color) { return "+f+" })")),color};root.RGB_W3=function(e){return"rgb("+(e.R>>0)+","+(e.G>>0)+","+(e.B>>0)+")"},root.RGBA_W3=function(e){var t="number"==typeof e.A?e.A/255:1;return"rgba("+(e.R>>0)+","+(e.G>>0)+","+(e.B>>0)+","+t+")"},root.W3_RGB=function(e){e=e.substr(4,e.length-5).split(",");return{R:parseInt(e[0]),G:parseInt(e[1]),B:parseInt(e[2])}},root.W3_RGBA=function(e){e=e.substr(5,e.length-6).split(",");return{R:parseInt(e[0]),G:parseInt(e[1]),B:parseInt(e[2]),A:255*parseFloat(e[3])}},root.HSL_W3=function(e){return"hsl("+(e.H+.5>>0)+","+(e.S+.5>>0)+"%,"+(e.L+.5>>0)+"%)"},root.HSLA_W3=function(e){var t="number"==typeof e.A?e.A/255:1;return"hsla("+(e.H+.5>>0)+","+(e.S+.5>>0)+"%,"+(e.L+.5>>0)+"%,"+t+")"},root.W3_HSL=function(e){e=e.substr(4,e.length-5).split(",");return{H:parseInt(e[0]),S:parseInt(e[1]),L:parseInt(e[2])}},root.W3_HSLA=function(e){e=e.substr(5,e.length-6).split(",");return{H:parseInt(e[0]),S:parseInt(e[1]),L:parseInt(e[2]),A:255*parseFloat(e[3])}},root.W3_HEX=root.W3_HEX24=function(e){return"#"===e.substr(0,1)&&(e=e.substr(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),parseInt("0x"+e)},root.W3_HEX32=function(e){return"#"===e.substr(0,1)&&(e=e.substr(1)),6===e.length?parseInt("0xFF"+e):parseInt("0x"+e)},root.HEX_W3=root.HEX24_W3=function(e,t){t||(t=6),e||(e=0);for(var n=e.toString(16),r=n.length;r<t;)n="0"+n,r++;for(r=n.length;r>t;)n=n.substr(1),r--;return"#"+n},root.HEX32_W3=function(e){return root.HEX_W3(e,8)},root.HEX_RGB=root.HEX24_RGB=function(e){return{R:e>>16,G:e>>8&255,B:255&e}},root.HEX32_RGBA=function(e){return{R:e>>>16&255,G:e>>>8&255,B:255&e,A:e>>>24}},root.RGBA_HEX32=function(e){return(e.A<<24|e.R<<16|e.G<<8|e.B)>>>0},root.RGB_HEX24=root.RGB_HEX=function(e){return e.R<0&&(e.R=0),e.G<0&&(e.G=0),e.B<0&&(e.B=0),e.R>255&&(e.R=255),e.G>255&&(e.G=255),e.B>255&&(e.B=255),e.R<<16|e.G<<8|e.B},root.RGB_CMY=function(e){return{C:1-e.R/255,M:1-e.G/255,Y:1-e.B/255}},root.RGBA_HSLA=root.RGB_HSL=function(e){var t,n,r=e.R/255,o=e.G/255,a=e.B/255,i=Math.min(r,o,a),s=Math.max(r,o,a),u=s-i,c=(s+i)/2;if(0===u)t=0,n=0;else{n=c<.5?u/(s+i):u/(2-s-i);var l=((s-r)/6+u/2)/u,d=((s-o)/6+u/2)/u,f=((s-a)/6+u/2)/u;r===s?t=f-d:o===s?t=1/3+l-f:a===s&&(t=2/3+d-l),t<0&&(t+=1),t>1&&(t-=1)}return{H:360*t,S:100*n,L:100*c,A:e.A}},root.RGBA_HSVA=root.RGB_HSV=function(e){var t,n,r=e.R/255,o=e.G/255,a=e.B/255,i=Math.min(r,o,a),s=Math.max(r,o,a),u=s-i;if(0===u)t=0,n=0;else{n=u/s;var c=((s-r)/6+u/2)/u,l=((s-o)/6+u/2)/u,d=((s-a)/6+u/2)/u;r===s?t=d-l:o===s?t=1/3+c-d:a===s&&(t=2/3+l-c),t<0&&(t+=1),t>1&&(t-=1)}return{H:360*t,S:100*n,V:100*s,A:e.A}},root.CMY_RGB=function(e){return{R:Math.max(0,255*(1-e.C)),G:Math.max(0,255*(1-e.M)),B:Math.max(0,255*(1-e.Y))}},root.CMY_CMYK=function(e){var t=e.C,n=e.M,r=e.Y,o=Math.min(r,Math.min(n,Math.min(t,1)));return{C:t=Math.round((t-o)/(1-o)*100),M:n=Math.round((n-o)/(1-o)*100),Y:r=Math.round((r-o)/(1-o)*100),K:o=Math.round(100*o)}},root.CMYK_CMY=function(e){return{C:e.C*(1-e.K)+e.K,M:e.M*(1-e.K)+e.K,Y:e.Y*(1-e.K)+e.K}},root.HSLA_RGBA=root.HSL_RGB=function(e){var t,n,r,o,a,i,s=e.H/360,u=e.S/100,c=e.L/100;return 0===u?t=n=r=c:(o=2*c-(a=c<.5?c*(1+u):c+u-u*c),(i=s+1/3)<0&&(i+=1),i>1&&(i-=1),t=6*i<1?o+6*(a-o)*i:2*i<1?a:3*i<2?o+(a-o)*(2/3-i)*6:o,(i=s)<0&&(i+=1),i>1&&(i-=1),n=6*i<1?o+6*(a-o)*i:2*i<1?a:3*i<2?o+(a-o)*(2/3-i)*6:o,(i=s-1/3)<0&&(i+=1),i>1&&(i-=1),r=6*i<1?o+6*(a-o)*i:2*i<1?a:3*i<2?o+(a-o)*(2/3-i)*6:o),{R:255*t,G:255*n,B:255*r,A:e.A}},root.HSVA_RGBA=root.HSV_RGB=function(e){var t,n,r,o,a,i,s=e.H/360,u=e.S/100,c=e.V/100;if(0===u)t=n=r=Math.round(255*c);else switch(s>=1&&(s=0),o=(s*=6)-Math.floor(s),a=Math.round(255*c*(1-u)),r=Math.round(255*c*(1-u*o)),i=Math.round(255*c*(1-u*(1-o))),c=Math.round(255*c),Math.floor(s)){case 0:t=c,n=i,r=a;break;case 1:t=r,n=c,r=a;break;case 2:t=a,n=c,r=i;break;case 3:t=a,n=r,r=c;break;case 4:t=i,n=a,r=c;break;case 5:t=c,n=a,r=r}return{R:t,G:n,B:r,A:e.A}}}();